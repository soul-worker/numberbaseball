<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Number Baseball</title>

  <style>
    body {
      text-align: center;
      max-width: 100%;
      max-height:100%;
    }
    
    a, a:hover, a:visited, a:focus, a:active{
      color:black;
      text-decoration: none;
    }

    span {
      font-size: 150%;
      color: red;
      font-weight: bold;
    }

    .btn,
    p#currentNumber {
      font-size: 30px;
    }

    table {
      border: 1px solid black;
      font-size: 16px;
    }

    table tbody td {
      border: 1px solid black;
    }
  </style>
</head>

<body>
    <h1><a href = "index.html">숫자야구 시뮬레이터</a></h1>
  <br>
  <br>
  <div style="width:100%">
    <div style="display:inline-block; width:40%; margin-right:2%">
      <div style="display:block;">
        <img id="chr" src="lilysample.png" style="display:block; margin: 5px auto;">
        <div style="display:block; border:2px dashed black; border-radius: 1em; padding: 0px 5px;width:auto;height:auto;">
          <p style="display:block;margin-bottom:0px;" id="text">어머~ 요조숙녀는 잠시 잊어요!</p>
          <p id="plustext" style="display:block;margin-top:0px;">저 릴리는 오늘 광기의 숫자 3개를 던질 예정이라구욧!</p>
        </div>
      </div>

      <div style="display:block;">
        <p id="currentNumber" style="border:1px solid black; height:20%; margin:5px 0">&nbsp;</p>
        <div>
          <button type="button" class="btn" onclick="enterNum('1');">1</button>
          <button type="button" class="btn" onclick="enterNum('2');">2</button>
          <button type="button" class="btn" onclick="enterNum('3');">3</button>
        </div>
        <div>
          <button type="button" class="btn" onclick="enterNum('4');">4</button>
          <button type="button" class="btn" onclick="enterNum('5');">5</button>
          <button type="button" class="btn" onclick="enterNum('6');">6</button>
        </div>
        <div>
          <button type="button" class="btn" onclick="enterNum('7');">7</button>
          <button type="button" class="btn" onclick="enterNum('8');">8</button>
          <button type="button" class="btn" onclick="enterNum('9');">9</button>
        </div>
        <div>
          <button type="button" class="btn" onclick="eraseNum();">&ShortLeftArrow;</button>
          <button type="button" class="btn" onclick="is3Num();">입력</button>
        </div>
      </div>
    </div>
    <div style="display:inline-block; vertical-align: top; margin-left:2%">
      <button type="button" class="btn" onclick="rule();" style="margin:20px 0px 10px 0px">rule</button>
      <table style="display:block; width:100%; margin:auto;">
        <thead>
          <tr>
            <td>라운드</td>
            <td>입력한 수</td>
            <td>결과</td>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td id="num1"></td>
            <td id="bs1"></td>
          </tr>
          <tr>
            <td>2</td>
            <td id="num2"></td>
            <td id="bs2"></td>
          </tr>
          <tr>
            <td>3</td>
            <td id="num3"></td>
            <td id="bs3"></td>
          </tr>
          <tr>
            <td>4</td>
            <td id="num4"></td>
            <td id="bs4"></td>
          </tr>
          <tr>
            <td>5</td>
            <td id="num5"></td>
            <td id="bs5"></td>
          </tr>
          <tr>
            <td>6</td>
            <td id="num6"></td>
            <td id="bs6"></td>
          </tr>
          <tr>
            <td>7</td>
            <td id="num7"></td>
            <td id="bs7"></td>
          </tr>
          <tr>
            <td>8</td>
            <td id="num8"></td>
            <td id="bs8"></td>
          </tr>
          <tr>
            <td>9</td>
            <td id="num9"></td>
            <td id="bs9"></td>
          </tr>
          <tr>
            <td>10</td>
            <td id="num10"></td>
            <td id="bs10"></td>
          </tr>
          <tr>
            <td>11</td>
            <td id="num11"></td>
            <td id="bs11"></td>
          </tr>
          <tr>
            <td>12</td>
            <td id="num12"></td>
            <td id="bs12"></td>
          </tr>
          <tr>
            <td>13</td>
            <td id="num13"></td>
            <td id="bs13"></td>
          </tr>
          <tr>
            <td>14</td>
            <td id="num14"></td>
            <td id="bs14"></td>
          </tr>
          <tr>
            <td>15</td>
            <td id="num15"></td>
            <td id="bs15"></td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <td> </td>
            <td id="result" style="font-weight:bold;font-size: 18px;"></td>
            <td> </td>
          </tr>
        </tfoot>
      </table>
    </div>
    




    <script type="text/javascript">
      var answer = new Array(3);
      var playernum = new Array(3);

      var string = "";
      var count = 0;
      var round = 0;

      answer[0] = Math.floor(Math.random() * 8 + 1);
      while (true) {
        answer[1] = Math.floor(Math.random() * 8 + 1);
        if (answer[1] != answer[0])
          break;
      }
      while (true) {
        answer[2] = Math.floor(Math.random() * 8 + 1);
        if (answer[2] != answer[0] && answer[2] != answer[1])
          break;
      }

      function enterNum(number) {
        if (count < 3) {
          var num = parseInt(number);
          string += num;
          document.getElementById("currentNumber").innerHTML = string;
          count++;
        }
      }

      function eraseNum() {
        string = string.slice(0, -1);
        if (string.length == 0)
          document.getElementById("currentNumber").innerHTML = "&nbsp;";
        else
          document.getElementById("currentNumber").innerHTML = string;

        count--;
      }

      function is3Num() {
        if (count == 3 && string.charAt(0) != string.charAt(1) && string.charAt(0) != string.charAt(2) && string.charAt(1) != string.charAt(2)) {
          for (var i = 0; i < 3; i++) {
            playernum[i] = string.charAt(i);
          }
          round++;
          evalNum(playernum);

        }
        else {
          alert("1~9 사이의 중복되지 않는 3자리 숫자를 입력해 주세요.");
        }
        string = "";
        document.getElementById("currentNumber").innerHTML = "&nbsp;";
        count = 0;
      }

      function rule(){
        document.getElementById("chr").src = "lily8.png";
        document.getElementById("text").innerHTML = "<span>볼(B)</span>은 숫자는 같지만 위치가 다르고<br><span>스트라이크(S)</span>는 숫자와 위치가 모두 같답니다."
        document.getElementById("plustext").innerHTML = "<span>OUT은 포함되지 않은 숫자이니 제외하고 3S를 맞히시면 된답니다."
      }

      function evalNum(playernum) {
        var numArr = playernum;
        var strike = 0;
        var ball = 0;
        var bsstate;
        var num = "num";
        var bs = "bs";
        for (var i = 0; i < 3; i++) {
          for (var j = 0; j < 3; j++) {
            if (answer[i] == numArr[j]) {
              if (i == j)
                strike += 1;
              else
                ball += 1;
            }
          }
        }
        if (strike == 0 && ball == 0)
          bsstate = "OUT";
        else if (strike == 0 && ball == 1)
          bsstate = "1B";
        else if (strike == 0 && ball == 2)
          bsstate = "2B";
        else if (strike == 0 && ball == 3)
          bsstate = "3B";
        else if (strike == 1 && ball == 0)
          bsstate = "1S";
        else if (strike == 1 && ball == 1)
          bsstate = "1S1B";
        else if (strike == 1 && ball == 2)
          bsstate = "1S2B";
        else if (strike == 2 && ball == 0)
          bsstate = "2S";
        else if (strike == 2 && ball == 1)
          bsstate = "2S1B";
        else if (strike == 3 && ball == 0)
          bsstate = "3S";
        document.getElementById("text").innerHTML = "<span>" + bsstate + "</span> 이군요.";
        num += round;
        bs += round;
        document.getElementById(num).innerHTML = "" + numArr[0] + numArr[1] + numArr[2];
        document.getElementById(bs).innerHTML = bsstate;
        if (bsstate == "3S") {
          document.getElementById("result").innerHTML = "WIN!";
          if (round == 1) {
            document.getElementById("text").innerHTML = "<span>" + bsstate + "</span> 이군요. 어떻게... 제 생각을 읽으셨는지요?";
            document.getElementById("chr").src = "lily1.png"
          }
          else if (round >= 2 && round <= 5) {
            document.getElementById("text").innerHTML = "<span>" + bsstate + "</span> 이군요. 오호라, 제법이네요.";
            document.getElementById("chr").src = "lily2.png"
          }
          else if (round >= 11 && round <= 15) {
            document.getElementById("text").innerHTML = "<span>" + bsstate + "</span> 이군요. 죽다 겨우 살아났네요.";
            document.getElementById("chr").src = "lily3.png"
          }
          else {
            document.getElementById("text").innerHTML = "<span>" + bsstate + "</span> 이군요. 좋은 승부였어요.";
            document.getElementById("chr").src = "lily4.png"
          }
          document.getElementById("plustext").innerHTML = "다시 도전하시겠어요? <button type = 'button' onclick='location.href=" + '"lilynb.html"' + "'>restart</button>";
          for (var i = 0; i < 13; i++) {
            var btns = document.getElementsByClassName("btn");
            btns[i].disabled = "true";
          }
        }
        else if (round == 15 && bsstate != "3S") {
          document.getElementById("result").innerHTML = "LOSE!";
          document.getElementById("text").innerHTML = "정말이지 시시하기 짝이 없는 승부로군요. 전력으로 덤비시죠!";
          document.getElementById("chr").src = "lily5.png"
          document.getElementById("plustext").innerHTML = "<button type = 'button' onclick='location.href=" + '"lilynb.html"' + "'>restart</button>";
          for (var i = 0; i < 13; i++) {
            var btns = document.getElementsByClassName("btn");
            btns[i].disabled = "true";
          }
        }
        else {
          if (bsstate == "2S" || bsstate == "1S2B" || bsstate == "3B") {
            document.getElementById("plustext").innerHTML = "좀만 더 힘내 보시길.";
            document.getElementById("chr").src = "lily7.png"
          }
          else if (bsstate == "OUT") {
            document.getElementById("plustext").innerHTML = "한심하네요.";
            document.getElementById("chr").src = "lily6.png"
          }
          else {
            document.getElementById("plustext").innerHTML = "순조롭네요.";
            document.getElementById("chr").src = "lily8.png"
          }

        }

      }
    </script>
</body>

</html>
